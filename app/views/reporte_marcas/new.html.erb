<h1>Reporte <%= @representante %></h1>

<%= semantic_form_for(@reporte_marca) do |f| %>

  <% if @reporte_marca.representante_id %>
    <%= f.hidden_field :representante_id %>
    <label for="">Cliente</label>
    <%= @reporte_marca.representante %>
  <% else %>
    <label for="">Busqueda</label>
    <%= @consulta.busqueda %>
    <% if @consulta.representante %>
      <label for="">Representante</label>
      <%= @consulta.representante %>
    <% end %>
  <% end %>

  <%= f.input :representante_type, :as => :hidden %>
  <%= f.input :consulta_id, :as => :hidden  %>
  <%= f.input :busqueda, :as => :hidden  %>
  <p>
    <label for="reporte_marca_idioma_es">
      <%= f.radio_button :idioma, 'es' %>
      Espa√±ol
    </label>
    <label for="reporte_marca_idioma_en">
      <%= f.radio_button :idioma, 'en' %>
      Ingles
    </label>
  </p>
  <%= f.input :carta, :as => :text, :input_html => {:cols => 100}, :label => "Analisis de la busqueda", :required => false %>
  <p class="inline-hints" style="display: none;">
    Si no escribe en el comentario la marca no sera seleccionada para el reporte
  </p>
  <table class="decorated">
    <tr>
      <th>Busqueda</th>
      <th>Signo</th>
      <th>Tipo</th>
      <th>Clase</th>
      <th>Numero</th>
      <th>Fecha</th>
      <th>Comentario</th>
    </tr>
    <%= f.semantic_fields_for :reporte_marca_detalles do |rd| %>
      <tr>
        <td>
          <%= rd.input :busqueda, :as => :hidden %>
          <%= rd.object.busqueda %>
          <%= rd.input :marca_id, :as => :hidden %>
        </td>
        <%= render :partial => "marca_foranea", :locals => { :marca => rd.object.marca_propia } %>
        <td>
          <%= rd.input :comentario, :as => :text, :label => false, :input_html => {:cols => 50, :rows => 12} %>
        </td>
      </tr>
    <% end %>
  </table>
  <p>
    <%= f.submit 'Salvar' %>
  </p>
<% end %>

<script type="text/javascript">
  var carta_es = "<%= @reporte_marca.crear_carta %>";
  var carta_en = "<%= @reporte_marca.crear_carta('en') %>";
</script>
